<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="ChillDipperz NFT Collection ‚Äî Don't panic. Dip. Chill. Repeat." />
  <title>ChillDipperz</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: radial-gradient(circle at top, #0a0a1a, #000);
      color: #fff;
      text-align: center;
      overflow-x: hidden;
    }

    .fade-block { opacity: 1; animation: fadeIn 1.2s ease forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    header img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      box-shadow: 0 0 30px #00ccff33;
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2.5rem;
      margin-top: 1rem;
      color: #00e0ff;
      text-shadow: 0 0 10px #00e0ff, 0 0 20px #ff00ff;
      animation: pulse 3s infinite ease-in-out;
    }
    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 10px #00e0ff, 0 0 20px #ff00ff; }
      50% { text-shadow: 0 0 25px #00e0ff, 0 0 40px #ff00ff; }
    }

    p.tagline { font-size: 1.2rem; color: #ccc; margin-bottom: 2rem; }

    .buttons { display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 3rem; }

    a.btn, button.btn {
      text-decoration: none; color: #fff; border: 2px solid #00e0ff;
      padding: 0.8rem 1.5rem; border-radius: 50px; transition: 0.3s;
      box-shadow: 0 0 10px #00e0ff77; background: transparent;
      font-family: 'Orbitron', sans-serif; cursor: pointer;
    }

    a.btn:hover, button.btn:hover {
      background: linear-gradient(90deg, #00e0ff, #ff00ff);
      box-shadow: 0 0 20px #00e0ff; transform: scale(1.05);
    }

    input#mintAmount {
      width: 60px; text-align: center; border-radius: 6px;
      padding: 0.3rem; border: 1px solid #00e0ff; background: #000;
      color: #00e0ff; font-family: 'Orbitron', sans-serif;
    }

    p.about {
      color: #ccc; max-width: 900px; margin: 0 auto 2rem auto;
      line-height: 1.4rem; font-size: 0.9rem; padding: 0 1rem;
      text-shadow: 0 0 6px #00e0ff, 0 0 12px #ff00ff;
    }

    footer { border-top: 1px solid #222; padding: 2rem 0; color: #888; font-size: 0.9rem; }

    @media (max-width: 600px) {
      h1 { font-size: 1.8rem; }
      .buttons { flex-direction: column; }
    }
  </style>
</head>

<body>
  <header>
    <img class="fade-block"
      src="https://raw.githubusercontent.com/Chilldipper/Chilldipperz/main/Chilldipper%20banner.png"
      alt="ChillDipperz Banner">
  </header>
<!-- GALLERY SECTION -->
<section id="gallery" class="fade-block" style="margin:5rem auto; max-width:1000px; padding:0 1rem;">
  <h2 style="color:#00e0ff;text-shadow:0 0 12px #00e0ff, 0 0 24px #ff00ff; margin-bottom:2rem;">
    The Chill Gallery
  </h2>
  <div id="nftGallery" style="
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    justify-items: center;
  "></div>
</section>

<script>
const galleryContainer = document.getElementById("nftGallery");
const collectionSlug = "ChillDipperz"; // your OpenSea slug

async function loadGallery() {
  try {
    if (!galleryContainer) return;

    galleryContainer.innerHTML = "<p style='color:#888;'>Loading ChillDipperz...</p>";

    // Fetch NFTs from OpenSea (Base chain)
    const response = await fetch(`https://api.opensea.io/api/v2/chain/base/collection/${collectionSlug}/nfts?limit=9`);
    const data = await response.json();

    if (!data.nfts || data.nfts.length === 0) {
      galleryContainer.innerHTML = "<p style='color:#888;'>No NFTs found in the collection yet.</p>";
      return;
    }

    // Clear the container
    galleryContainer.innerHTML = "";

    data.nfts.forEach(nft => {
      const wrapper = document.createElement("a");
      wrapper.href = nft.opensea_url || `https://opensea.io/assets/base/${nft.contract}/` + nft.identifier;
      wrapper.target = "_blank";
      wrapper.style = "text-decoration:none;display:block;";

      const img = document.createElement("img");
      img.src = nft.image_url || nft.preview_image_url;
      img.alt = nft.name || "ChillDipperz";
      img.loading = "lazy";
      img.style = `
        width: 100%;
        border-radius: 12px;
        box-shadow: 0 0 20px #00e0ff66;
        transition: 0.3s;
        cursor: pointer;
      `;
      img.onmouseover = () => (img.style.transform = "scale(1.05)");
      img.onmouseout = () => (img.style.transform = "scale(1)");

      const caption = document.createElement("p");
      caption.textContent = nft.name || "ChillDipper";
      caption.style = "margin-top:8px;color:#aaa;font-size:0.8rem;";

      wrapper.appendChild(img);
      wrapper.appendChild(caption);
      galleryContainer.appendChild(wrapper);
    });
  } catch (err) {
    console.error("Gallery load failed:", err);
    galleryContainer.innerHTML = "<p style='color:#888;'>Could not load gallery. Try refreshing.</p>";
  }
}

window.addEventListener("DOMContentLoaded", loadGallery);
</script>


  <main>
    <h1 class="fade-block">Welcome to ChillDipperz</h1>
    <p class="tagline fade-block">Don‚Äôt panic. Dip. Chill. Repeat.</p>

    <div class="buttons fade-block">
      <a href="https://twitter.com/chilldipperZ" target="_blank" class="btn">Follow on Twitter</a>
      <a href="https://opensea.io/collection/chilldipperz" target="_blank" class="btn">View on OpenSea</a>
    </div>

    <p class="about fade-block">
      A 10,000-piece meme-driven pixel collection of chill dippers.<br>
      Born to dip. Forced to chill. When the chart bleeds, the chill begins.
    </p>

    <!-- MINT SECTION -->
    <section id="mint" class="fade-block" style="margin-top: 3rem;">
      <h2 style="color:#00e0ff;text-shadow:0 0 12px #00e0ff,0 0 24px #ff00ff;">Mint Your ChillDipper</h2>
      <p style="color:#ccc;">Connect your wallet and mint directly from the site.</p>
      <p id="price" style="color:#00e0ff; margin-top:0.5rem;">üí∞ Price: 0.0025 ETH each</p>

      <div style="margin-top:1.5rem;">
        <label for="mintAmount" style="color:#00e0ff;">Amount:</label>
        <input type="number" id="mintAmount" value="1" min="1" max="10">
        <p id="totalCost" style="color:#aaa; margin-top:0.5rem;">Total: 0.0025 ETH</p>
      </div>

      <div style="margin-top:1.5rem;">
        <button id="connectBtn" class="btn">Connect Wallet</button>
        <button id="mintBtn" class="btn" disabled>Mint NFT</button>
      </div>

      <p id="supply" style="color:#00e0ff; margin-top:1rem; font-size:0.95rem;">Total Minted: ‚Ä¶ / 10,000</p>
      <p id="status" style="color:#888;margin-top:0.5rem;font-size:0.9rem;">Wallet not connected</p>
    </section>

    <!-- LORE SECTION -->
    <section id="lore" class="fade-block" style="margin:5rem auto; max-width:900px; padding:0 1rem;">
      <h2 style="color:#00e0ff;text-shadow:0 0 12px #00e0ff,0 0 24px #ff00ff;">The Lore</h2>
      <p style="color:#ccc; line-height:1.6rem; margin-top:1.5rem;">
        In the ancient charts of crypto chaos, there rose a tribe unlike any other.
        When the candles burned red and timelines screamed, they didn‚Äôt panic.
      </p>
      <p style="color:#ccc; line-height:1.6rem;">
        They took deep breaths, grabbed their wallets, and whispered the sacred mantra:
        <span style="color:#00e0ff;">‚ÄúBuy the dip. Chill the trip.‚Äù</span>
      </p>
      <p style="color:#ccc; line-height:1.6rem;">
        These were the <strong>ChillDipperz</strong> ‚Äî 10,000 souls forged in market volatility.
        They meditate through liquidation, meme through the madness, and see opportunity
        where others see doom.
      </p>
      <p style="color:#ccc; line-height:1.6rem;">
        Across chains and bear markets, they wander‚Ä¶ stacking dips, chilling harder,
        and waiting for the next cosmic pump.
      </p>
      <p style="color:#00e0ff; text-shadow:0 0 8px #00e0ff, 0 0 16px #ff00ff; margin-top:2rem;">
        The charts may bleed. The chill remains.
      </p>
    </section>

    <!-- THE VIBE SECTION -->
    <section id="vibe" class="fade-block" style="margin:5rem auto; max-width:900px; padding:0 1rem;">
      <h2 style="color:#00e0ff;text-shadow:0 0 12px #00e0ff,0 0 24px #ff00ff;">The Vibe</h2>
      <p style="color:#ccc; line-height:1.6rem; margin-top:1.5rem;">
        We‚Äôre not building a roadmap. We‚Äôre building a mood.
      </p>
      <p style="color:#ccc; line-height:1.6rem;">
        No promises, no utilities, just vibes, memes, and questionable market timing.
      </p>
      <p style="color:#ccc; line-height:1.6rem;">
        We don‚Äôt chase pumps ‚Äî we chill in the dumps.  
        When everyone screams ‚Äúexit,‚Äù we‚Äôre already buying the dip.
      </p>
      <p style="color:#00e0ff; text-shadow:0 0 8px #00e0ff, 0 0 16px #ff00ff; margin-top:2rem;">
        The mission: <strong>Keep the market cold. Keep the holders chill.</strong>
      </p>
    </section>
  </main>

  <footer class="fade-block">¬© 2025 ChillDipperz ‚Äî Stay Chill.</footer>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const connectBtn = document.getElementById('connectBtn');
      const mintBtn = document.getElementById('mintBtn');
      const mintAmount = document.getElementById('mintAmount');
      const statusText = document.getElementById('status');
      const supplyText = document.getElementById('supply');
      const totalCostText = document.getElementById('totalCost');
      let provider, signer, contract;

      const contractAddress = "0xE81e227f2d32836Ed92Dd374967b07F10437C485";
      const abi = [
        {
          "inputs": [{ "internalType": "uint256", "name": "_amount", "type": "uint256" }],
          "name": "mint", "outputs": [], "stateMutability": "payable", "type": "function"
        },
        {
          "inputs": [], "name": "totalSupply",
          "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
          "stateMutability": "view", "type": "function"
        }
      ];

      const MINT_PRICE_WEI = ethers.utils.parseEther("0.0025");

      function updateTotalCost() {
        const amount = parseInt(mintAmount.value, 10) || 1;
        const totalEth = (0.0025 * amount).toFixed(4);
        totalCostText.textContent = `Total: ${totalEth} ETH`;
      }

      async function updateSupply() {
        try {
          if (!contract) return;
          const total = await contract.totalSupply();
          supplyText.textContent = `Total Minted: ${total.toString()} / 10,000`;
        } catch {
          supplyText.textContent = "Total Minted: ‚Äî / 10,000";
        }
      }

      async function connectWallet() {
        if (!window.ethereum) return alert("Please install MetaMask!");
        try {
          provider = new ethers.providers.Web3Provider(window.ethereum);
          await provider.send("eth_requestAccounts", []);
          signer = provider.getSigner();

          const network = await provider.getNetwork();
          if (network.chainId !== 8453) {
            await window.ethereum.request({
              method: "wallet_switchEthereumChain",
              params: [{ chainId: "0x2105" }],
            });
          }

          contract = new ethers.Contract(contractAddress, abi, signer);
          const address = await signer.getAddress();
          statusText.textContent = `‚úÖ Connected: ${address.slice(0,6)}...${address.slice(-4)}`;
          connectBtn.textContent = "Connected";
          connectBtn.disabled = true;
          mintBtn.disabled = false;

          await updateSupply();
        } catch (err) {
          console.error(err);
          statusText.textContent = "‚ùå Connection failed: " + err.message;
        }
      }

      async function mintNFT() {
        try {
          const amount = parseInt(mintAmount.value, 10);
          if (isNaN(amount) || amount < 1 || amount > 10)
            return alert("Mint between 1 and 10 NFTs");

          const totalValue = MINT_PRICE_WEI.mul(amount);
          const tx = await contract.mint(amount, { value: totalValue });

          statusText.textContent = "‚è≥ Minting your ChillDipper...";
          await tx.wait();
          statusText.textContent = "‚úÖ Mint successful! Check your wallet or BaseScan.";
          await updateSupply();
        } catch (err) {
          console.error(err);
          statusText.textContent = "‚ùå Mint failed: " + (err?.data?.message || err.message);
        }
      }

      mintAmount.addEventListener("input", updateTotalCost);
      connectBtn.addEventListener("click", connectWallet);
      mintBtn.addEventListener("click", mintNFT);
      updateTotalCost();
    });
  </script>
</body>
</html>
