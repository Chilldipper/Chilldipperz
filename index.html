<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="ChillDipperz NFT Collection ‚Äî Don't panic. Dip. Chill. Repeat." />
  <title>ChillDipperz</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: radial-gradient(circle at top, #0a0a1a, #000);
      color: #fff;
      text-align: center;
      overflow-x: hidden;
    }

    .fade-block {
      opacity: 1;
      animation: fadeIn 1.2s ease forwards;
    }
    header img.fade-block { animation-delay: 0.2s; }
    h1.fade-block { animation-delay: 0.8s; }
    p.tagline.fade-block { animation-delay: 1.2s; }
    .buttons.fade-block { animation-delay: 1.6s; }
    p.about.fade-block { animation-delay: 1.8s; }
    footer.fade-block { animation-delay: 2s; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    header img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      box-shadow: 0 0 30px #00ccff33;
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2.5rem;
      margin-top: 1rem;
      color: #00e0ff;
      text-shadow: 0 0 10px #00e0ff, 0 0 20px #ff00ff;
      animation: pulse 3s infinite ease-in-out;
    }

    @keyframes pulse {
      0%, 100% {
        text-shadow: 0 0 10px #00e0ff, 0 0 20px #ff00ff;
      }
      50% {
        text-shadow: 0 0 25px #00e0ff, 0 0 40px #ff00ff;
      }
    }

    p.tagline {
      font-size: 1.2rem;
      color: #ccc;
      margin-bottom: 2rem;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    a.btn, button.btn {
      text-decoration: none;
      color: #fff;
      border: 2px solid #00e0ff;
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      transition: 0.3s;
      box-shadow: 0 0 10px #00e0ff77;
      background: transparent;
      font-family: 'Orbitron', sans-serif;
      cursor: pointer;
    }

    a.btn:hover, button.btn:hover {
      background: linear-gradient(90deg, #00e0ff, #ff00ff);
      box-shadow: 0 0 20px #00e0ff;
      transform: scale(1.05);
    }

    p.about {
      color: #ccc;
      max-width: 900px;
      margin: 0 auto 2rem auto;
      line-height: 1.4rem;
      font-size: 0.9rem;
      padding: 0 1rem;
      text-shadow: 0 0 6px #00e0ff, 0 0 12px #ff00ff;
    }

    footer {
      border-top: 1px solid #222;
      padding: 2rem 0;
      color: #888;
      font-size: 0.9rem;
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.8rem; }
      .buttons { flex-direction: column; }
    }
  </style>
</head>

<body>
  <header>
    <img class="fade-block"
      src="https://raw.githubusercontent.com/Chilldipper/Chilldipperz/main/Chilldipper%20banner.png"
      alt="ChillDipperz Banner">
  </header>

  <main>
    <h1 class="fade-block">Welcome to ChillDipperz</h1>
    <p class="tagline fade-block">Don‚Äôt panic. Dip. Chill. Repeat.</p>

    <div class="buttons fade-block">
      <a href="https://twitter.com/chilldipperZ" target="_blank" class="btn">Follow on Twitter</a>
      <a href="https://opensea.io/collection/chilldipperz" target="_blank" class="btn">View on OpenSea</a>
    </div>

    <p class="about fade-block">
      Born to dip. Forced to chill. When the chart bleeds, the chill begins.
    </p>

    <!-- MINT SECTION -->
    <section id="mint" class="fade-block" style="margin-top: 3rem;">
      <h2 style="color:#00e0ff;text-shadow:0 0 12px #00e0ff,0 0 24px #ff00ff;">Mint Your ChillDipper</h2>
      <p style="color:#ccc;">Connect your wallet and mint directly from the site.</p>

      <div style="margin-top:1.5rem;">
        <button id="connectBtn" class="btn">Connect Wallet</button>
        <button id="mintBtn" class="btn" disabled>Mint NFT</button>
      </div>

      <p id="status" style="color:#888;margin-top:1rem;font-size:0.9rem;">Wallet not connected</p>
    </section>
  </main>

  <footer class="fade-block">
    ¬© 2025 ChillDipperz ‚Äî Stay Chill.
  </footer>

  <!-- Load ethers.js before main script -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const connectBtn = document.getElementById('connectBtn');
      const mintBtn = document.getElementById('mintBtn');
      const statusText = document.getElementById('status');
      let provider, signer;

      async function connectWallet() {
        if (typeof window.ethereum === "undefined") {
          alert("MetaMask not detected. Please install or enable it!");
          return;
        }

        try {
          provider = new ethers.providers.Web3Provider(window.ethereum);
          await provider.send("eth_requestAccounts", []);
          signer = provider.getSigner();
          const address = await signer.getAddress();

          const network = await provider.getNetwork();
          if (network.chainId !== 8453) { // Base Mainnet
            try {
              await window.ethereum.request({
                method: "wallet_switchEthereumChain",
                params: [{ chainId: "0x2105" }],
              });
              statusText.textContent = "üîÑ Switched to Base. Please reconnect.";
              return;
            } catch (switchError) {
              statusText.textContent = "‚ö†Ô∏è Switch MetaMask to Base Mainnet.";
              return;
            }
          }

          statusText.textContent = `‚úÖ Connected: ${address.slice(0,6)}...${address.slice(-4)}`;
          connectBtn.textContent = "Connected";
          connectBtn.disabled = true;
          mintBtn.disabled = false;
        } catch (err) {
          console.error("Connection error:", err);
          statusText.textContent = "‚ùå Connection failed: " + err.message;
        }
      }

      async function mintNFT() {
        try {
          const contractAddress = "0xE81e227f2d32836Ed92Dd374967b07F10437C485";
          const abi = [
            {
              "inputs": [{ "internalType": "uint256", "name": "_amount", "type": "uint256" }],
              "name": "mint",
              "outputs": [],
              "stateMutability": "payable",
              "type": "function"
            }
          ];

          const contract = new ethers.Contract(contractAddress, abi, signer);
          const tx = await contract.mint(1, {
            value: ethers.utils.parseEther("0.0025")
          });

          statusText.textContent = "‚è≥ Minting your ChillDipper...";
          await tx.wait();
          statusText.textContent = "‚úÖ Mint successful! Check BaseScan or your wallet.";
        } catch (err) {
          console.error(err);
          statusText.textContent = "‚ùå Mint failed: " + err.message;
        }
      }

      connectBtn.addEventListener("click", connectWallet);
      mintBtn.addEventListener("click", mintNFT);
    });
  </script>
</body>
</html>
